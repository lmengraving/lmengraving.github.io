---
const services = [
  {
    number: '01',
    title: 'Custom Marking Dies & Tooling',
    description: 'Engineering durable steel stamps and rolling dies for permanent part identification and branding applications.',
    capabilities: [
      { name: 'Rotary & Roll Dies', detail: 'Precision-engraved rollers for continuous marking on cylindrical or flat surfaces.' },
      { name: 'Impact & Press Stamps', detail: 'Heavy-duty steel stamps for metal stamping and embossing applications.' },
      { name: 'Hot Stamping Dies', detail: 'Thermally conductive brass and steel dies for packaging and decorative branding.' }
    ],
    icon: `<path d="M12 36L24 8L36 36" stroke="currentColor" stroke-width="2"/><path d="M16 28H32" stroke="currentColor" stroke-width="2"/><circle cx="24" cy="8" r="3" stroke="currentColor" stroke-width="2"/>`
  },
  {
    number: '02',
    title: 'Industrial Laser Marking & Texturing',
    description: 'Non-contact, permanent marking solutions for branding, functional texturing, and custom component engraving.',
    capabilities: [
      { name: 'Deep Engraving', detail: 'High-depth material removal for mold cavities and 3D textures.' },
      { name: 'Laser Annealing', detail: 'Corrosion-resistant black marking on stainless steel and titanium (medical/aerospace).' },
      { name: 'Bar Codes, QR & UID', detail: 'Precision marking of serial numbers, bar codes, and QR codes for full product traceability.' }
    ],
    icon: `<path d="M24 4L44 24L24 44L4 24L24 4Z" stroke="currentColor" stroke-width="2"/><circle cx="24" cy="24" r="6" stroke="currentColor" stroke-width="2"/><path d="M24 10V18M24 30V38M10 24H18M30 24H38" stroke="currentColor" stroke-width="1.5"/>`
  },
  {
    number: '03',
    title: '3D CNC & Laser Engraving',
    description: 'Advanced three-dimensional engraving using both CNC machining and laser technology for molds and products.',
    capabilities: [
      { name: 'Multi-Axis CNC Machining', detail: 'Complex 3D geometries and deep cavity engraving in brass, copper, aluminum, stainless, and hardened steel.' },
      { name: '3D Laser Engraving', detail: '5-axis laser technology for sidewalls, contours, and complex mold surface geometries.' },
      { name: '3D Graphics & Logos', detail: 'Three-dimensional shapes and logos engraved on contoured surfaces for molding applications.' }
    ],
    icon: `<path d="M24 4L42 14V34L24 44L6 34V14L24 4Z" stroke="currentColor" stroke-width="2"/><path d="M24 4V44M6 14L42 34M42 14L6 34" stroke="currentColor" stroke-width="1" opacity="0.5"/><circle cx="24" cy="24" r="4" fill="currentColor"/>`
  },
  {
    number: '04',
    title: 'Revision ID & Logo Engraving',
    description: 'Precision laser engraving of customer logos, IDs, revision numbers, and reference codes onto mold components and inserts.',
    capabilities: [
      { name: 'Logo Engraving', detail: 'Custom brand logos and graphics engraved on mold cavities for permanent part branding.' },
      { name: 'Cavity Numbering', detail: 'Deep engraving of cavity numbers and revision levels for clear identification.' },
      { name: 'Component Marking', detail: 'Engraving matching IDs on inserts, sliders, and lifters to assist in assembly and maintenance.' }
    ],
    icon: `<rect x="8" y="8" width="32" height="32" stroke="currentColor" stroke-width="2"/><path d="M8 16H40M8 24H40M8 32H40" stroke="currentColor" stroke-width="1.5" opacity="0.5"/><rect x="12" y="12" width="8" height="8" fill="currentColor"/><rect x="28" y="12" width="8" height="8" fill="currentColor"/>`
  },
  {
    number: '05',
    title: 'Electrode Engraving for EDM',
    description: 'Laser engraving of electrodes for EDM applications. Carbon graphite and copper electrodes etched with precision.',
    capabilities: [
      { name: 'Graphite Electrodes', detail: 'Precision laser etching on carbon graphite electrodes for EDM sinking operations.' },
      { name: 'Copper Electrodes', detail: 'Engraving copper and copper-impregnated electrodes with fine detail for complex cavities.' },
      { name: 'Over-burn Control', detail: 'Raised or sunk characters with any desired over-burn specification.' }
    ],
    icon: `<circle cx="24" cy="24" r="16" stroke="currentColor" stroke-width="2"/><path d="M24 12V36" stroke="currentColor" stroke-width="2"/><path d="M16 20L24 12L32 20" stroke="currentColor" stroke-width="2"/><circle cx="24" cy="28" r="4" fill="currentColor"/>`
  }
];
---

<section id="services" class="py-16 md:py-24 lg:py-32 relative overflow-hidden bg-steel-900/30">
  <div class="absolute top-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-steel-700 to-transparent"></div>
  <div class="absolute top-1/3 left-0 w-1/3 h-80 bg-laser/5 blur-[120px] -translate-x-1/4"></div>
  <div class="absolute bottom-1/4 right-0 w-1/4 h-64 bg-precision-cyan/5 blur-[100px] translate-x-1/4"></div>

  <div class="max-w-7xl mx-auto px-6 lg:px-8 relative">
    <div class="text-center mb-10 md:mb-16 lg:mb-24">
      <div class="inline-flex items-center gap-3 mb-4 md:mb-6">
        <span class="w-8 h-[1px] bg-steel-600"></span>
        <span class="font-mono text-xs tracking-[0.3em] text-steel-400 uppercase">What We Do</span>
        <span class="w-8 h-[1px] bg-steel-600"></span>
      </div>
      <h2 class="font-display text-3xl md:text-5xl lg:text-6xl font-bold tracking-tight text-white mb-4 md:mb-6">
        Our <span class="text-laser">Services</span>
      </h2>
      <p class="font-body text-base md:text-lg text-steel-400 max-w-3xl mx-auto hidden md:block">
        From precision mold components to advanced laser processing â€” comprehensive manufacturing solutions for demanding industries.
      </p>
    </div>

    <!-- Mobile: Collapsible accordion -->
    <div class="md:hidden space-y-3">
      {services.map((service, index) => (
        <div class="service-accordion bg-steel-900/50 border border-steel-800" data-index={index}>
          <button
            class="service-toggle w-full flex items-center gap-4 p-4 text-left"
            aria-expanded="false"
          >
            <div class="w-10 h-10 flex items-center justify-center bg-laser/10 border border-laser/30 shrink-0">
              <svg viewBox="0 0 48 48" fill="none" class="w-5 h-5 text-laser" set:html={service.icon} />
            </div>
            <div class="flex-1 min-w-0">
              <h3 class="font-display text-base font-bold text-white truncate">{service.title}</h3>
            </div>
            <svg class="service-chevron w-5 h-5 text-steel-400 transition-transform duration-300 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div class="service-content hidden px-4 pb-4">
            <p class="font-body text-steel-400 text-sm mb-4">{service.description}</p>
            <div class="space-y-2">
              {service.capabilities.map((cap) => (
                <div class="flex items-start gap-2 text-sm">
                  <span class="w-1.5 h-1.5 bg-laser rounded-full mt-1.5 shrink-0"></span>
                  <span class="text-steel-300">{cap.name}</span>
                </div>
              ))}
            </div>
          </div>
        </div>
      ))}
    </div>

    <!-- Desktop: Full cards -->
    <div class="hidden md:block space-y-8">
      {services.map((service) => (
        <div class="bg-steel-900/30 border border-steel-800 hover:border-laser/30 transition-all duration-500 p-8 lg:p-10">
          <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-1">
              <div class="flex items-center gap-4 mb-4">
                <div class="w-14 h-14 flex items-center justify-center bg-laser/10 border border-laser/30">
                  <svg viewBox="0 0 48 48" fill="none" class="w-8 h-8 text-laser" set:html={service.icon} />
                </div>
                <span class="font-mono text-[10px] tracking-widest text-laser uppercase">{service.number}</span>
              </div>
              <h3 class="font-display text-2xl font-bold text-white mb-3">{service.title}</h3>
              <p class="font-body text-steel-400 text-sm leading-relaxed">{service.description}</p>
            </div>

            <div class="lg:col-span-2">
              <h4 class="font-mono text-[10px] tracking-widest text-steel-500 uppercase mb-4">Key Capabilities</h4>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                {service.capabilities.map((cap) => (
                  <div class="bg-steel-950 border border-steel-800 p-5">
                    <div class="font-display text-lg font-semibold text-white mb-2">{cap.name}</div>
                    <p class="font-body text-steel-400 text-xs leading-relaxed">{cap.detail}</p>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<script>
  const accordions = document.querySelectorAll('.service-accordion');

  accordions.forEach(accordion => {
    const toggle = accordion.querySelector('.service-toggle');
    const content = accordion.querySelector('.service-content');
    const chevron = accordion.querySelector('.service-chevron');

    toggle?.addEventListener('click', () => {
      const isExpanded = toggle.getAttribute('aria-expanded') === 'true';

      // Close all other accordions
      accordions.forEach(other => {
        if (other !== accordion) {
          other.querySelector('.service-toggle')?.setAttribute('aria-expanded', 'false');
          other.querySelector('.service-content')?.classList.add('hidden');
          other.querySelector('.service-chevron')?.classList.remove('rotate-180');
        }
      });

      // Toggle current accordion
      toggle.setAttribute('aria-expanded', (!isExpanded).toString());
      content?.classList.toggle('hidden');
      chevron?.classList.toggle('rotate-180');
    });
  });
</script>
